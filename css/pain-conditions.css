/* =========================================================
   BASE / RESET
   ========================================================= */
html, body { margin:0; padding:0; overflow-x:hidden; }
html { -webkit-text-size-adjust:100%; }
* { box-sizing:border-box; }

/* Цветове/променливи */
:root{
  --pc-accent:#007777;
  --pc-accent-hover:#3614f1;
  --ink:#333;
  --bg:#f8f8f8;

  /* Footer vars */
  --f-accent:#0b66ff;
  --f-ink:#0f172a;
  --f-bg:#f3f5f7;
  --f-soft-shadow:0 8px 24px rgba(15,23,42,.08);
  --f-ring:0 0 0 3px rgba(11,102,255,.18);
}

/* =========================================================
   PAIN CONDITIONS — Секция + Карти
   ========================================================= */

/* Секция */
.pain-conditions-detail-section{
  padding:60px 20px;
  background:var(--bg);
  text-align:center;
}
.pain-conditions-detail-section .container{
  max-width:1400px;
  width:95%;
  margin:0 auto;
}
.pain-conditions-detail-section h3{
  font-size:2.8em;
  color:var(--ink);
  margin:0 0 40px;
}

/* Обяснение */
.pain-explanation{
  font-size:2em;
  text-align:center;
  line-height:1.3;
  color:var(--ink);
  max-width:600px;
  margin:0 auto 20px;
  font-weight:500;
}

/* Грид с карти */
.pain-buttons-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(280px,1fr));
  gap:60px;
  justify-content:center;
  max-width:1200px;
  margin:0 auto;
  padding:15px;
}

/* Карта */
.pain-button{
  position:relative;
  display:flex;
  flex-direction:column;
  justify-content:space-between;
  text-decoration:none;
  color:var(--ink);
  background:#fff;
  border:1px solid #e0e0e0;
  border-radius:0;
  transition:box-shadow .25s ease, border-color .25s ease, background-color .25s ease, transform .18s ease;
  box-shadow:0 4px 12px rgba(0,0,0,.07);
  overflow:hidden;
  min-height:400px;
}
.pain-button:hover{
  background-color:#e6f2ff;
  border-color:#99ccff;
  box-shadow:0 6px 15px rgba(0,0,0,.12);
  transform:translateY(-2px);
}

/* Медия контейнер 1:1 — без translate, без display:none */
.pain-button-media.image-container{
  position:relative;
  width:100%;
  aspect-ratio:1/1;
  overflow:hidden;
  background:#f0f0f0;
  border-radius:10px;
}

/* Слоеве (JS управлява opacity чрез класове) */
.pain-button-media.image-container > img.static-img,
.pain-button-media.image-container > video.hover-img{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:contain;
  display:block;
  transition:opacity .28s ease;
}
.pain-button-media.image-container > img.static-img{ opacity:1; }
.pain-button-media.image-container > video.hover-img{ opacity:0; }

/* ВИДЕО: показвай само ако е готово/играе */
.pain-button-media.image-container.video-ready.is-playing > img.static-img{ opacity:0; }
.pain-button-media.image-container.video-ready.is-playing > video.hover-img{ opacity:1; }

/* Desktop hover – работи само при .video-ready */
@media (hover:hover) and (pointer:fine){
  .pain-button-media.image-container.video-ready:hover > img.static-img{ opacity:0 !important; }
  .pain-button-media.image-container.video-ready:hover > video.hover-img{ opacity:1 !important; }
}

/* На мобилно hover правилата не се прилагат — JS слага .is-playing */
@media (hover:none){
  .pain-button-media.image-container.video-ready:hover > img.static-img{ opacity:1; }
  .pain-button-media.image-container.video-ready:hover > video.hover-img{ opacity:0; }
}

/* Текст под медията */
.pain-button-text{
  background:var(--pc-accent);
  padding:30px 15px;
  font-size:1.8em;
  font-weight:800;
  color:#fff;
  line-height:1.2;
  display:flex;
  align-items:center;
  justify-content:center;
  width:100%;
  box-sizing:border-box;
  margin:0;
}
.pain-button:hover .pain-button-text{ background:var(--pc-accent-hover); color:#fff; }

/* Навигационен бутон */
.button-group{ margin-top:40px; }
.back-button{
  display:inline-block;
  padding:16px 30px;
  background:#007bff;
  color:#fff;
  text-decoration:none;
  border-radius:8px;
  font-size:1.1em;
  font-weight:700;
  transition:background-color .25s ease, transform .2s ease, box-shadow .25s ease;
  box-shadow:0 2px 6px rgba(0,0,0,.1);
}
.back-button:hover{ background:#0056b3; transform:translateY(-1px); }

/* ===================== Responsive (Pain cards) ===================== */
@media (max-width:1400px){
  .pain-buttons-grid{ grid-template-columns:repeat(auto-fit, minmax(250px,1fr)); gap:15px; padding:0 20px; }
}
@media (max-width:1200px){
  .pain-buttons-grid{ grid-template-columns:repeat(3,1fr); gap:10px; padding:0 15px; }
  .pain-conditions-detail-section h3{ font-size:2.5em; margin-bottom:30px; }
  .pain-button{ min-height:320px; }
  .pain-button-text{ font-size:1.8em; padding:8px 5px; }
}
@media (max-width:992px){
  .pain-buttons-grid{ grid-template-columns:repeat(2,1fr); gap:10px; padding:0 10px; }
  .pain-conditions-detail-section h3{ font-size:2em; margin-bottom:25px; }
  .pain-button{ min-height:270px; }
  .pain-button-text{ font-size:1.6em; padding:6px 4px; }
}
@media (max-width:768px){
  .pain-buttons-grid{ grid-template-columns:1fr; gap:8px; padding:0 8px; }
  .pain-conditions-detail-section{ padding:50px 10px; }
  .pain-conditions-detail-section h3{ font-size:1.6em; margin-bottom:20px; }
  .pain-button{ min-height:240px; }
  .pain-button-text{ font-size:1.4em; padding:10px 3px; }
  .back-button{ padding:10px 20px; font-size:1em; }
}
@media (max-width:479px){
  .pain-conditions-detail-section{ padding:30px 5px; }
  .pain-conditions-detail-section h3{ font-size:1.3em; margin-bottom:15px; }
  .pain-buttons-grid{ gap:5px; padding:0 5px; }
  .pain-button{ min-height:200px; }
  .pain-button-text{ font-size:1.2em; padding:8px 2px; }
  .back-button{ padding:8px 15px; font-size:.9em; }
}

/* Намалена анимация */
@media (prefers-reduced-motion:reduce){
  *{ animation:none !important; transition:none !important; }
}

/* =========================================================
   FOOTER — layout и ефекти (точно по визията)
   ========================================================= */

/* Таргетираме и <footer>, и .footer за съвместимост */
footer, .footer{
  background:var(--f-bg);
  padding:40px 0 28px;
  color:var(--f-ink);
  font-size:18px;
  line-height:1.6;
}

/* Вътрешен контейнер */
footer .contact-section,
.footer .contact-section{
  max-width:1200px;
  margin:0 auto;
  padding:0 16px;
}

/* Три колони: карта | център | дясно */
footer .contact-container,
.footer .contact-container{
  display:grid;
  grid-template-columns:360px 1fr 1.2fr;
  gap:40px;
  align-items:start;
}

/* --- ЛЯВО: карта --- */
footer .contact-left .map iframe,
.footer .contact-left .map iframe{
  width:360px; height:260px;
  border:0;
  border-radius:14px;
  box-shadow:0 4px 14px rgba(0,0,0,.08);
  background:#e9eef3;
  display:block;
  transition:transform .3s ease, box-shadow .3s ease;
}
footer .contact-left .map iframe:hover,
.footer .contact-left .map iframe:hover{
  transform:translateY(-2px);
  box-shadow:0 12px 28px rgba(0,0,0,.12);
}

/* --- ЦЕНТЪР: заглавие + социални --- */
footer .contact-center, .footer .contact-center{ text-align:center; }

footer .contact-center h2,
.footer .contact-center h2{
  margin:0 0 14px;
  font-size:2rem; /* поправено от 2 rem */
  font-weight:800;
}

footer .social-links, .footer .social-links{
  display:inline-flex;
  gap:14px;
}
footer .social-links a,
.footer .social-links a{
  position:relative;
  border-radius:10px;
  outline:none;
  transition:transform .25s ease, filter .25s ease;
}
footer .social-links img,
.footer .social-links img{
  width:64px; height:64px;
  object-fit:contain; display:block;
  filter:drop-shadow(0 2px 4px rgba(0,0,0,.08));
  border-radius:8px;
  transition:filter .25s ease, opacity .25s ease, transform .25s ease;
}
footer .social-links a:hover,
footer .social-links a:focus-visible,
.footer .social-links a:hover,
.footer .social-links a:focus-visible{
  transform:translateY(-4px) scale(1.03);
}
footer .social-links a:hover img,
footer .social-links a:focus-visible img,
.footer .social-links a:hover img,
.footer .social-links a:focus-visible img{
  filter:drop-shadow(0 8px 18px rgba(11,102,255,.25));
}

/* --- ДЯСНО: телефон, работно време, адрес --- */
footer .contact-item, .footer .contact-item{
  display:flex;
  gap:12px;
  align-items:center;
  margin-bottom:16px;
  border-radius:14px;
  padding:8px 10px;
  transition:background-color .25s ease, box-shadow .25s ease;
}
footer .contact-item:hover, .footer .contact-item:hover{
  background:rgba(11,102,255,.06);
  box-shadow:var(--f-soft-shadow);
}
footer .icon, .footer .icon{
  width:48px; height:48px;
  object-fit:contain; flex:0 0 48px;
  transition:transform .25s ease;
}
footer .contact-item:hover .icon,
.footer .contact-item:hover .icon{
  transform:scale(1.06) rotate(-2deg);
}

/* Телефон акцент */
footer .contact-item.phone .icon,
.footer .contact-item.phone .icon{ width:54px; height:54px; }
footer .contact-item.phone span,
.footer .contact-item.phone span{
  font-size:2.2rem;
  font-weight:800;
  letter-spacing:.5px;
  transition:color .25s ease;
}

/* Лек „пулс“ */
@keyframes f-pulse{ 0%,100%{transform:scale(1)} 50%{transform:scale(1.03)} }
footer .contact-item.phone:hover span,
.footer .contact-item.phone:hover span{
  color:var(--f-accent);
  animation:f-pulse .8s ease-in-out;
}

/* Линк към карта */
footer .map-link, .footer .map-link{
  color:var(--f-accent);
  text-decoration:underline;
  position:relative;
  transition:color .25s ease;
}
footer .map-link::after, .footer .map-link::after{
  content:"↗";
  margin-left:.35em;
  opacity:0;
  transition:transform .25s ease, opacity .25s ease;
}
footer .map-link:hover::after,
footer .map-link:focus-visible::after,
.footer .map-link:hover::after,
.footer .map-link:focus-visible::after{
  opacity:.9;
  transform:translateY(-1px);
}

/* Долен ред линкове */
footer .footer-links, .footer .footer-links{
  margin-top:22px;
  text-align:center;
  font-size:1.05rem;
}
footer .footer-links a, .footer .footer-links a{
  color:var(--f-accent);
  text-decoration:none;
  background-image:linear-gradient(currentColor,currentColor);
  background-position:50% 100%;
  background-repeat:no-repeat;
  background-size:0% 2px;
  transition:background-size .25s ease, color .25s ease;
}
footer .footer-links a:hover,
footer .footer-links a:focus-visible,
.footer .footer-links a:hover,
.footer .footer-links a:focus-visible{
  background-size:100% 2px;
}

/* Фокус достъпност */
footer a:focus-visible, .footer a:focus-visible{
  box-shadow:var(--f-ring);
  border-radius:10px;
}

/* Back to top */
footer .back-to-top, .footer .back-to-top{
  display:inline-flex;
  align-items:center;
  gap:.5rem;
  margin-top:10px;
  padding:10px 14px;
  border-radius:999px;
  background:#fff;
  box-shadow:var(--f-soft-shadow);
  font-weight:700;
  transition:transform .25s ease;
}
footer .back-to-top:hover, .footer .back-to-top:hover{ transform:translateY(-3px); }

/* Footer responsive */
@media (max-width:1024px){
  footer .contact-container, .footer .contact-container{
    grid-template-columns:320px 1fr;
    grid-auto-rows:auto;
  }
  footer .contact-center, .footer .contact-center{ order:2; }
  footer .contact-right,  .footer .contact-right{ order:3; }
  footer .contact-left .map iframe,
  .footer .contact-left .map iframe{ width:320px; height:230px; }
}
@media (max-width:768px){
  footer, .footer{ font-size:16px; }
  footer .contact-container, .footer .contact-container{
    grid-template-columns:1fr;
    gap:22px;
  }
  footer .contact-left .map iframe,
  .footer .contact-left .map iframe{ width:100%; height:220px; }
  footer .social-links img, .footer .social-links img{ width:56px; height:56px; }
  footer .contact-item.phone span, .footer .contact-item.phone span{ font-size:1.9rem; }
  footer .back-to-top, .footer .back-to-top{ display:none; }
}

/* Тъмна тема */
@media (prefers-color-scheme:dark){
  :root{ --f-bg:#0b1220; --f-ink:#e5e7eb; }
  footer, .footer{
    background:var(--f-bg);
    color:var(--f-ink);
  }
  footer .footer-links a, .footer .footer-links a,
  footer .map-link, .footer .map-link{ color:var(--f-accent); }
  footer .social-links img, .footer .social-links img{
    filter:drop-shadow(0 2px 6px rgba(0,0,0,.6));
  }
  footer .contact-item:hover, .footer .contact-item:hover{
    background:rgba(11,102,255,.14);
  }
}

/* Respect reduced motion (глобално) */
@media (prefers-reduced-motion:reduce){
  footer *, .footer *{ animation:none !important; transition:none !important; }
}
/* ===== HERO заглавие за подстраници (по-стегнато и балансирано) ===== */

/* по-тясна контейнер ширина за хедъра */
.hero-subpage .container{
  max-width: 1100px;
  margin: 0 auto;
}

/* H1 */
.pci-title{
  font-family: "Merriweather", Georgia, Cambria, "Times New Roman", Times, serif;
  font-weight: 800;
  font-size: clamp(28px, 3.2vw + 1rem, 44px); /* по-малък максимум */
  line-height: 1.18;
  letter-spacing: -0.012em;
  color: #0E7C86;
  margin: 0 auto 10px;
  max-width: 28ch;                /* ограничава ширината за 2–3 реда */
  text-wrap: balance;             /* по-красиво пренасяне */
  white-space: normal !important;
  overflow-wrap: anywhere;
  hyphens: auto;
  filter: drop-shadow(0 1px 0 rgba(0,0,0,.04));
  text-align: center;
}

/* декоративна линия под H1 */
.pci-title::after{
  content:"";
  display:block;
  width: 400px;
  height: 4px;
  margin: 12px auto 0;
  border-radius: 3px;
  background: linear-gradient(90deg, #0E7C86, #16a34a);
  opacity: .9;
}

/* подзаглавие */
.pci-intro{
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, Inter, Arial, sans-serif;
  font-size: clamp(16px, 1.1vw + .6rem, 18px);
  line-height: 1.65;
  color: #2f5f63;
  max-width: 74ch;
  margin: 8px auto 18px;
  text-wrap: pretty;
  text-align: center;
}

/* разделител под хедъра (фина линия) */
.hero-subpage{
  padding: 36px 0 22px;
  background: #fff;
  border-bottom: 1px solid #eef2f3;
}

/* мобилни до 480px – малко по-дребно и без ограничение на ширината */
@media (max-width: 480px){
  .pci-title{
    font-size: clamp(24px, 6.2vw, 34px);
    max-width: 100%;
  }
  .pci-title::after{ margin-top: 10px; }
}
/* === iOS/Chrome FIX за картите с видео === */

/* 1) Изравняваме с JS: и img, и video са cover + собствен слой */
.pain-button-media.image-container > img.static-img,
.pain-button-media.image-container > video.hover-img{
  object-fit: cover;            /* <-- беше contain в CSS, JS слага cover */
  will-change: opacity;         /* по-гладко кръстосано избледняване */
  backface-visibility: hidden;  /* предотвратява „мигване“ в iOS */
}

/* 2) Fallback, ако aspect-ratio не се поддържа (по-стари iOS/Safari) */
@supports not (aspect-ratio: 1 / 1){
  .pain-button-media.image-container{
    position: relative;
    width: 100%;
    height: 0;
    padding-bottom: 100%;        /* квадрат 1:1 */
  }
  .pain-button-media.image-container > img.static-img,
  .pain-button-media.image-container > video.hover-img{
    position: absolute;
    inset: 0;
  }
}

/* 3) Ускорение на контейнера при hover (само десктоп) */
@media (hover:hover) and (pointer:fine){
  .pain-button{ will-change: transform, box-shadow; }
}

/* 4) Заглавие – по-стегнато на много тесни екрани и без твърда ширина на линията */
.pci-title::after{
  width: min(72px, 28vw);  /* вместо твърди 400px, не излиза от екрана */
}
@media (max-width: 380px){
  .pci-title{
    line-height: 1.14;
    letter-spacing: -0.01em;
  }
}
/* --- iOS Safari sizing & anchoring fixes --- */
/* Центрираме изрично кадъра (по подразбиране някои версии взимат 0 0) */
.pain-button-media.image-container > img.static-img,
.pain-button-media.image-container > video.hover-img{
  object-position: center center;         /* ключово за „горе-вляво“ */
  transform: translateZ(0);               /* рендър стабилизация в WebKit */
  -webkit-transform: translateZ(0);
}

/* Като flex item в .pain-button: дай свобода на aspect-ratio кутията */
.pain-button-media.image-container{
  min-width: 0;                           /* Safari flex+aspect-ratio hack */
  min-height: 0;
  flex: 0 0 auto;                         /* не я stretch-вай по височина */
  display: block;                         /* гарантирай блоково поведение */
}

/* Увери се, че контейнерът е real containing block за absolute слоеве */
.pain-button-media.image-container{
  position: relative;                     /* дублирано е ок – по-сигурно */
  overflow: hidden;                       /* пази кръстосаното избледняване чисто */
}

/* Постерът на видеото в някои iOS версии „премигва“ – фиксираме слоя */
.pain-button-media.image-container > video.hover-img{
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  will-change: opacity;
}
/* === 1) HERO offset за мобилно (без да пипаме топбара) === */
/* добавя безопасен padding-top само на хиро секцията при тесни екрани */
@media (max-width: 768px){
  .hero-subpage,
  .page-hero{
    /* ~височина на фиксирания бар + малко въздух; работи и с iOS notch */
    padding-top: clamp(56px, 8vw + env(safe-area-inset-top, 0px), 80px);
  }
  /* ако има anchor-скрол към заглавието, да не се скрие */
  .hero-subpage h1,
  .page-hero h1,
  .pci-title{
    scroll-margin-top: clamp(56px, 8vw + env(safe-area-inset-top, 0px), 80px);
  }
}

/* малко вътрешно „въздухче“ в контейнера, за да не „опира“ текстът в Safari */
.hero-subpage .container,
.page-hero .container{
  padding-inline: 16px;
  box-sizing: border-box;
}

/* === 2) H1: безопасно пренасяне и подравняване за Safari/Chrome мобилно === */
.pci-title{
  margin-left: auto;
  margin-right: auto;
  text-align: center;
  white-space: normal !important;
  overflow-wrap: anywhere;
  word-break: normal;
  hyphens: auto;
}

/* декоративната линия — винаги flu, да не „излиза“ в тясно */
.pci-title::after{
  width: min(72px, 28vw); /* override на по-горното 400px */
}

/* леко по-меко разстояние за WebKit (някои iOS версии „раздуват“ буквите) */
@supports (-webkit-touch-callout: none){
  .pci-title{ letter-spacing: -0.006em; }
}

/* === 3) Медийните слоеве (img/video) — стабилно центриране и cover === */
/* това НЕ променя визията, само фиксира iOS позиционирането и „горе-вляво“ */
.pain-button-media.image-container > img.static-img,
.pain-button-media.image-container > video.hover-img{
  position: absolute !important;
  inset: 0 !important;
  width: 100% !important;
  height: 100% !important;
  object-fit: cover !important;      /* бием по-горното contain */
  object-position: center center !important;
  display: block !important;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  will-change: opacity;
}

.pain-button-media.image-container{
  /* flex + aspect-ratio стабилност в Safari */
  min-width: 0;
  min-height: 0;
  flex: 0 0 auto;
  position: relative;   /* гарантиран containing block */
  overflow: hidden;
  border-radius: 10px;  /* запазва се твоят ъгъл */
}

/* === 4) Общ „safety“ за заглавия и секции при anchor-скролове === */
h1, h2, h3, .hero-subpage, .page-hero{
  scroll-margin-top: clamp(56px, 8vw + env(safe-area-inset-top, 0px), 80px);
}
